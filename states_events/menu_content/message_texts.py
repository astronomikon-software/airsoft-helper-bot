from model.match import Match
from repository.repository_initiation import *
from mapping.datetime_mapping import int_time_to_str
from mapping.loneliness_mapping import loneliness_to_str
from utils.text_util import escape_for_markdown as esc


class MessageText:
    HELLO = '''–ó–¥—Ä–∞–≤–∏—è, —Ç–æ–≤–∞—Ä–∏—â!ü§ô

–î–∞–Ω–Ω—ã–π –±–æ—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø–æ–º–æ—â–∏ —Å—Ç—Ä–∞–π–∫–±–æ–ª–∏—Å—Ç—É, –≤ –ø–æ–∏—Å–∫–µ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏–≥—Ä.

–í—ã–±–∏—Ä–∞–π –Ω—É–∂–Ω—É—é –æ–ø—Ü–∏—é, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ!

–ò –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Å—è –Ω–∞ –∞–≤—Ç–æ—Ä–∞ –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –ü–µ—Å–µ—Ü: @pesec_team
'''
    CHOOSE_FUNCTION = '–í—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é:'
    SCHEDULE = '''–ù–∞–π–¥–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é —Ç–µ–±—è –∏–≥—Ä—É!

‚úÖ –ü–æ–∏—Å–∫ –ø–æ –¥–∞—Ç–∞–º. 
–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∏ –Ω–µ —É–ø—É—Å—Ç–∏ –Ω–µ –æ–¥–Ω–æ–π –∏–≥—Ä—ã!

    ‚úÖ–ü–æ–∏—Å–∫ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º.
–ò—â–µ—à—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∏–≥—Ä—É –æ—Ç –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö —Ç–µ–±—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤? –ò–ª–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—ã –∏—â–µ—à—å —Ä–æ–ª–µ–≤—É—é –∏–≥—Ä—É –∏–ª–∏ –∏–≥—Ä—É –ø–æ–¥—Ö–æ–¥—è—â—É—é –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤?
–¢–µ–ø–µ—Ä—å —Ç–µ–±–µ –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å —Ç–æ–Ω–Ω—ã –∏–≥—Ä, –∏—Å–ø–æ–ª—å–∑—É–π —Ñ–∏–ª—å—Ç—Ä—ã –∏ –Ω–∞—Ö–æ–¥–∏ —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã!
'''
    HELP = '–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –ø–∏—à–∏—Ç–µ @bait_media!'
    DONATE = '''–ú–æ–∂–µ—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –Ω–∞—Å –ø–æ —Å—Å—ã–ª–∫–µ:

https://www.donationalerts.com/r/danceegss

–¢–∞–º –∂–µ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–∂–µ–ª–∞–Ω–∏—è –ø–æ –¥–æ—Ä–∞–±–æ—Ç–∫–µ –±–æ—Ç–∞'''
    MARKET = '–ë–∞—Ä–∞—Ö–æ–ª–∫–∞ –∏ —Ñ–æ—Ä—É–º –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–æ–≤–æ—Å—Ç—è–º–∏!'
    HOW_TO = '–û —Ç–æ–º, –∫–∞–∫ –Ω–∞—á–∞—Ç—å –∏–≥—Ä–∞—Ç—å, –≤—ã –º–æ–∂–µ—Ç–µ —É–∑–Ω–∞—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ:' + '\n' + '\n' + 'https://vk.com/@spbstraik-kak-nachat-igrat-v-straikbol'
    ORGANISER_APPLICATION = '–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞, –ø—Ä–∏—à–ª–∏—Ç–µ —Å–≤–æ–π –¥–∏–∫–ø–∏–∫ —Å—é–¥–∞:' + '\n' + '@bait_media'
    SET_NAME = '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã:'
    SET_DATETIME = '–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ "–î–î.–ú–ú.–ì–ì–ì–ì –ß–ß:–ú–ú":'
    CHOOSE_GENRE = '''–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è:
    
(–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–ø–æ–≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É")'''
    CHOOSE_GROUP = '''–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤:
    
(–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É")'''
    CHOOSE_PLACE = '–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:'
    CHOOSE_DURATION = '–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–≥—Ä—ã:'
    CALENDAR = '–ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏'
    FILTERS = '–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä:'
    SET_PLACE = '–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–∏–≥–æ–Ω –∏ –∞–¥—Ä–µ—Å –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:'
    SET_GROUP = '''–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤:
    
(–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É")'''
    SET_GENRE = '''–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è:
    
(–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–ø–æ–≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É")'''
    SET_LONELINESS = '–ü–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –∏–≥—Ä–∞ –¥–ª—è –æ–¥–∏–Ω–æ—á–µ–∫?'
    SET_URL = '–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –∏–≥—Ä—É:'
    SET_ANNOTATION = '–í–≤–µ–¥–∏—Ç–µ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–≥—Ä—ã:'
    SET_DURATION = '–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–≥—Ä—ã:'
    CONFIRM_DATA = '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö'
    NEW_GAME_CREATED = '–ù–æ–≤–∞—è –∏–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!'
    NEW_GAME_CANCELLED = '–û—Ç–º–µ–Ω–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã'
    SET_DATETIME_AGAIN = '–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –Ω–µ–≤–µ—Ä–µ–Ω –∏–ª–∏ –≤–≤–µ–¥–µ–Ω–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –¥–∞—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.' + '\n' + '\n' + \
                         '–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ "–î–î.–ú–ú.–ì–ì–ì–ì –ß–ß:–ú–ú":'
    LIST_OF_MATCHES = '–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ç—á, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:'
    CHOOSE_LONELINESS_STATUS = '–í—ã–±–µ—Ä–∏—Ç–µ, –¥–æ–ª–∂–Ω–∞ –ª–∏ –∏–≥—Ä–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç—å –æ–¥–∏–Ω–æ—á–∫–∞–º:'
    CHOOSE_DATE = '–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏–≥—Ä:'
    GAME_UPDATED = '–î–∞–Ω–Ω—ã–µ –æ–± –∏–≥—Ä–µ —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω—ã!'
    CURRENT_MATCH = '–°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∏–≥—Ä—ã:'
    UPDATING_MATCH = '–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã:'
    UPDATING_PROCESS = '–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–≥—Ä—É:'
    INSURE_UPDATING = '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏–≥—Ä—É?'
    GAME_UPDATING_IS_CANCELLED = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–≥—Ä—ã –æ—Ç–º–µ–Ω–µ–Ω–æ.'
    NO_MATCHES_FOUND = '–ù–µ –Ω–∞–π–¥–µ–Ω–æ –∏–≥—Ä –≤ –¥–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏'
    NO_MATCHES_FOUND_THIS_DAY = '–ù–µ –Ω–∞–π–¥–µ–Ω–æ –∏–≥—Ä –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É'
    SUBSCRIPTION = '–í—ã –º–æ–∂–µ—Ç–µ –æ—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–≤–ª–µ–Ω–∏—è –æ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∏–≥—Ä –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏!'
    SUBSCRIPTION_CREATED = '–ü–æ–¥–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞!'
    SUBSCRIPTION_ALREADY_EXISTS = '–í—ã —É–∂–µ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∏–≥—Ä–∞—Ö'
    SUBSCRIPTION_DELETED = '–ü–æ–¥–ø–∏—Å–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞'
    SUBSCRIPTION_DOESNT_EXIST = '–í—ã –µ—â—ë –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∏–≥—Ä–∞—Ö'

    @staticmethod
    def match_data(match: Match) -> str:
        groups = ''
        for i in range(len(match.group_id)):
            groups += group_repository.read_by_id(match.group_id[i]).name
            if i < len(match.group_id) - 1:
                groups += ', '

        genres = ''
        for i in range(len(match.genre_id)):
            genres += genre_repository.read_by_id(match.genre_id[i]).name
            if i < len(match.genre_id) - 1:
                genres += ', '

        return '\n'.join([
            f'- <b>–ù–∞–∑–≤–∞–Ω–∏–µ:</b> {esc(match.name)}',
            f'- <b>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</b> {esc(int_time_to_str(match.start_time))}',
            f'- <b>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</b> {esc(match.duration)}',
            f'- <b>–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:</b> {esc(match.place_name)}',
            f'- <b>–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã:</b> {esc(groups)}\n',
            f'- <b>–¢–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è:</b> {esc(genres)}\n',
            f'- <b>–ü–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –¥–ª—è –æ–¥–∏–Ω–æ—á–µ–∫:</b> {esc(loneliness_to_str(match.is_loneliness_friendly))}',
            f'- <b>–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–≥—Ä—É:</b> {esc(match.url)}',
            f'- <b>–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:</b> {esc(match.annotation)}'
        ])

    @staticmethod
    def new_match_announcement(match: Match) -> str:
        return '–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –∏–≥—Ä–∞' + '\n' + '\n' + MessageText.match_data(match)

    @staticmethod
    def delayed_announcement(matches: list[Match]) -> str:
        matches_text = ''
        for match in matches:
            matches_text += '\n' + '\n' + MessageText.match_data(match)
        return '–£–∂–µ —á–µ—Ä–µ–∑ –ø—è—Ç—å –¥–Ω–µ–π —Å–æ—Å—Ç–æ–∏—Ç—Å—è –∏–≥—Ä–∞!' + matches_text
